{"version":3,"sources":["webpack:///./resources/js/modules/user/pages/edit/Page.js","webpack:///./resources/js/modules/user/pages/edit/components/Form.js","webpack:///./resources/js/modules/user/pages/edit/index.js","webpack:///./resources/js/modules/user/service.js","webpack:///./resources/js/modules/user/store/actions.js"],"names":["Page","Component","constructor","props","validator","ReeValidate","user","toJson","state","errors","handleChange","bind","handleSubmit","componentWillReceiveProps","nextProps","_","isEqual","setState","name","value","remove","validate","then","e","preventDefault","validateAll","success","submit","dispatch","userUpdateRequest","catch","error","statusCode","forOwn","message","field","add","render","PropTypes","object","isRequired","func","displayName","propTypes","onChange","onSubmit","Form","has","target","first","email","phone","about","any","mapStateToProps","User","connect","params","Promise","resolve","reject","Http","patch","id","Transformer","send","res","userActions","fetch","data","err","response","status","resetErrors","replace","searchStr","replaceStr","resetValidationFields","userUpdate","payload","type","USER_UPDATE","unsetUser","USER_UNSET"],"mappings":"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","file":"8.js","sourcesContent":["// import libs\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport { userUpdateRequest } from '../../service'\nimport ReeValidate from 'ree-validate'\n\n// import components\nimport Form from './components/Form'\n\nclass Page extends Component {\n  static displayName = 'UserPage'\n  static propTypes = {\n    user: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n  }\n  \n  constructor(props) {\n    super(props)\n    \n    this.validator = new ReeValidate({\n      'name': 'required|min:3',\n      'email': 'required|email',\n      'phone': 'min:8|numeric',\n      'about': 'min:10|max:1024',\n    })\n    \n    const user = this.props.user.toJson()\n    \n    this.state = {\n      user,\n      errors: this.validator.errors\n    }\n    \n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n  \n  componentWillReceiveProps(nextProps) {\n    const user = nextProps.user.toJson()\n    \n    if (!_.isEqual(this.state.user, user)) {\n      this.setState({ user })\n    }\n    \n  }\n  \n  handleChange(name, value) {\n    const { errors } = this.validator\n    \n    this.setState({ user: { ...this.props.user, [name]: value} })\n    \n    errors.remove(name)\n    \n    this.validator.validate(name, value)\n      .then(() => {\n          this.setState({ errors })\n      })\n  }\n  \n  handleSubmit(e) {\n    e.preventDefault()\n    const user = this.state.user\n    const { errors } = this.validator\n    \n    this.validator.validateAll(user)\n      .then((success) => {\n        if (success) {\n          this.submit(user)\n        } else {\n          this.setState({ errors })\n        }\n      })\n  }\n  \n  submit(user) {\n    this.props.dispatch(userUpdateRequest(user))\n      .catch(({ error, statusCode }) => {\n        const { errors } = this.validator\n        \n        if (statusCode === 422) {\n          _.forOwn(error, (message, field) => {\n            errors.add(field, message);\n          });\n        }\n        \n        this.setState({ errors })\n      })\n  }\n  \n  render() {\n    return <main className=\"col-sm-9 ml-sm-auto col-md-10 pt-3\" role=\"main\">\n      <h1>Profile</h1>\n  \n      <section className=\"row\">\n        <div className=\"col-12 col-md-9 col-sm-12\">\n          <Form {...this.state}\n                onChange={this.handleChange}\n                onSubmit={this.handleSubmit}/>\n        </div>\n      </section>\n    </main>\n  }\n}\n\nexport default Page\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst displayName = 'UserFrom'\nconst propTypes = {\n  user: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n}\n\nconst Form = ({ user, errors, onChange, onSubmit }) => {\n  return <form onSubmit={e => onSubmit(e)}>\n    <div className=\"form-group row\">\n      <label htmlFor=\"name\" className=\"col-sm-2 col-form-label\">Name</label>\n      <div className=\"col-sm-10\">\n        <input type=\"text\"\n               id=\"name\"\n               name=\"name\"\n               className={`form-control ${errors.has('name') && 'is-invalid'}`}\n               placeholder=\"Full Name\"\n               value={user.name || ''}\n               onChange={e => onChange(e.target.name, e.target.value)} />\n        {errors.has('name') && <div className=\"invalid-feedback\">{errors.first('name')}</div>}\n      </div>\n    </div>\n    <div className=\"form-group row\">\n      <label htmlFor=\"email\" className=\"col-sm-2 col-form-label\">Email</label>\n      <div className=\"col-sm-10\">\n        <input type=\"email\"\n               id=\"email\"\n               name=\"email\"\n               className={`form-control ${errors.has('email') && 'is-invalid'}`}\n               placeholder=\"Email\"\n               value={user.email || ''}\n               onChange={e => onChange(e.target.name, e.target.value)}/>\n        {errors.has('email') && <div className=\"invalid-feedback\">{errors.first('email')}</div>}\n      </div>\n    </div>\n    <div className=\"form-group row\">\n      <label htmlFor=\"phone\" className=\"col-sm-2 col-form-label\">Phone</label>\n      <div className=\"col-sm-10\">\n        <input type=\"text\"\n               id=\"phone\"\n               name=\"phone\"\n               className={`form-control ${errors.has('phone') && 'is-invalid'}`}\n               placeholder=\"Phone\"\n               value={user.phone || ''}\n               onChange={e => onChange(e.target.name, e.target.value)}/>\n        {errors.has('phone') && <div className=\"invalid-feedback\">{errors.first('phone')}</div>}\n      </div>\n    </div>\n    <div className=\"form-group row\">\n      <label htmlFor=\"about\" className=\"col-sm-2 col-form-label\">About</label>\n      <div className=\"col-sm-10\">\n        <textarea id=\"about\"\n                  name=\"about\"\n                  className={`form-control ${errors.has('about') && 'is-invalid'}`}\n                  rows=\"3\"\n                  placeholder=\"About\"\n                  value={user.about || ''}\n                  onChange={e => onChange(e.target.name, e.target.value)} />\n        {errors.has('about') && <div className=\"invalid-feedback\">{errors.first('about')}</div>}\n      </div>\n    </div>\n    <div className=\"form-group row\">\n      <div className=\"col-sm-10 ml-auto\">\n        <button disabled={errors.any()} type=\"submit\" className=\"btn btn-primary\">Update</button>\n      </div>\n    </div>\n  </form>\n}\n\nForm.displayName = displayName\nForm.propTypes = propTypes\n\nexport default Form\n","/* ============\n * Container\n * ============.\n *\n * Containers are used fetch the data from state\n * and disperse to the components.\n */\n\n// import libs\nimport { connect } from 'react-redux'\nimport User from '../../User'\n\n// import components\nimport Page from './Page'\n\n// map store state as properties of the component\nconst mapStateToProps = state => {\n  return {\n    user: new User(state.user)\n  }\n}\n\n// binding store with component\nexport default connect(mapStateToProps)(Page)\n","import Http from '../../utils/Http'\nimport Transformer from '../../utils/Transformer'\nimport * as userActions from './store/actions'\n\nexport function userUpdateRequest(params) {\n  return dispatch => (\n    new Promise((resolve, reject) => {\n      Http.patch(`/users/${params.id}`, Transformer.send(params))\n        .then(res => {\n          dispatch(userActions.userUpdate(Transformer.fetch(res.data.user)))\n          return resolve()\n        })\n        .catch((err) => {\n          const statusCode = err.response.status;\n          const data = {\n            error: null,\n            statusCode,\n          };\n\n          if (statusCode === 422) {\n            const resetErrors = {\n              errors: err.response.data,\n              replace: false,\n              searchStr: '',\n              replaceStr: '',\n            };\n            data.error = Transformer.resetValidationFields(resetErrors);\n          } else if (statusCode === 401) {\n            data.error = err.response.data.message;\n          }\n          return reject(data);\n        })\n    })\n  )\n}\n","/* ============\n * Actions for the user module\n * ============\n *\n * The actions that are available on the\n * user module.\n */\n\nimport {\n  USER_UPDATE,\n  USER_UNSET,\n} from './action-types';\n\nexport function userUpdate(payload) {\n  return {\n    type: USER_UPDATE,\n    payload,\n  };\n}\n\nexport function unsetUser() {\n  return {\n    type: USER_UNSET,\n  }\n}\n\n"],"sourceRoot":""}